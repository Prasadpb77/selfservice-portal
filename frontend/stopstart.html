
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="" />
    <meta
      name="keywords"
      content="Responsive Sidebar, HTML Sidebar, CSS Sidebar,Side Navigation Bar, Side navbar, HTML and CSS,HTML CSS JavaScript,html sidebar,Navigation Bar,Side Navigation Bar,side navigation menu bar,sidebar bootstrap,Sidebar Menu,Website Section,
HTML,CSS,JavaScript,Tailwind,Bootstrap"
    />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>EC2 Self Service Portal</title>
    <!-- <link rel="stylesheet" href="style.css" /> -->
    <!-- Boxicons CDN Link -->
    <link href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css" rel="stylesheet" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="../custom-scripts.js" defer></script>
  </head>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap');
*{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Poppins" , sans-serif;
}
.sidebar{
  position: fixed;
  left: 0;
  top: 0;
  height: 100%;
  width: 78px;
  background: #11101D;
  padding: 6px 14px;
  z-index: 99;
  transition: all 0.5s ease;
}
.sidebar.open{
  width: 250px;
}
.sidebar .logo-details{
  height: 60px;
  display: flex;
  align-items: center;
  position: relative;
}
.sidebar .logo-details .icon{
  opacity: 0;
  transition: all 0.5s ease;
}
.sidebar .logo-details .logo_name{
  color: #fff;
  font-size: 20px;
  font-weight: 600;
  opacity: 0;
  transition: all 0.5s ease;
}
.sidebar.open .logo-details .icon,
.sidebar.open .logo-details .logo_name{
  opacity: 1;
}
.sidebar .logo-details #btn{
  position: absolute;
  top: 50%;
  right: 0;
  transform: translateY(-50%);
  font-size: 22px;
  transition: all 0.4s ease;
  font-size: 23px;
  text-align: center;
  cursor: pointer;
  transition: all 0.5s ease;
}
.sidebar.open .logo-details #btn{
  text-align: right;
}
.sidebar i{
  color: #fff;
  height: 60px;
  min-width: 50px;
  font-size: 28px;
  text-align: center;
  line-height: 60px;
}
.sidebar .nav-list{
  margin-top: 20px;
  height: 100%;
}
.sidebar li{
  position: relative;
  margin: 8px 0;
  list-style: none;
}
.sidebar li .tooltip{
  position: absolute;
  top: -20px;
  left: calc(100% + 15px);
  z-index: 3;
  background: #fff;
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
  padding: 6px 12px;
  border-radius: 4px;
  font-size: 15px;
  font-weight: 400;
  opacity: 0;
  white-space: nowrap;
  pointer-events: none;
  transition: 0s;
}
.sidebar li:hover .tooltip{
  opacity: 1;
  pointer-events: auto;
  transition: all 0.4s ease;
  top: 50%;
  transform: translateY(-50%);
}
input {
	font-family: inherit;
	line-height:inherit;
	color:#2e3750;
	min-width:12em;
}
.sidebar.open li .tooltip{
  display: none;
}
.sidebar input{
  font-size: 15px;
  color: #FFF;
  font-weight: 400;
  outline: none;
  height: 50px;
  width: 100%;
  width: 50px;
  border: none;
  border-radius: 12px;
  transition: all 0.5s ease;
  background: #1d1b31;
}
.sidebar.open input{
  padding: 0 20px 0 50px;
  width: 100%;
}
.sidebar .bx-search{
  position: absolute;
  top: 50%;
  left: 0;
  transform: translateY(-50%);
  font-size: 22px;
  background: #1d1b31;
  color: #FFF;
}
.sidebar.open .bx-search:hover{
  background: #1d1b31;
  color: #FFF;
}
.sidebar .bx-search:hover{
  background: #FFF;
  color: #11101d;
}
.sidebar li a{
  display: flex;
  height: 100%;
  width: 100%;
  border-radius: 12px;
  align-items: center;
  text-decoration: none;
  transition: all 0.4s ease;
  background: #11101D;
}
.sidebar li a:hover{
  background: #FFF;
}
.sidebar li a .links_name{
  color: #fff;
  font-size: 15px;
  font-weight: 400;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: 0.4s;
}

/* CSS */
.refresh-button {
  align-items: center;
  appearance: none;
  background-color: #fff;
  border-radius: 24px;
  border-style: none;
  box-shadow: rgba(0, 0, 0, .2) 0 3px 5px -1px,rgba(0, 0, 0, .14) 0 6px 10px 0,rgba(0, 0, 0, .12) 0 1px 18px 0;
  box-sizing: border-box;
  color: #3c4043;
  cursor: pointer;
  display: inline-flex;
  fill: currentcolor;
  font-family: "Google Sans",Roboto,Arial,sans-serif;
  font-size: 14px;
  font-weight: 500;
  height: 48px;
  justify-content: center;
  letter-spacing: .25px;
  line-height: normal;
  max-width: 100%;
  overflow: visible;
  padding: 2px 24px;
  position: relative;
  text-align: center;
  text-transform: none;
  transition: box-shadow 280ms cubic-bezier(.4, 0, .2, 1),opacity 15ms linear 30ms,transform 270ms cubic-bezier(0, 0, .2, 1) 0ms;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  width: auto;
  will-change: transform,opacity;
  z-index: 0;
}

.refresh-button:hover {
  background: #F6F9FE;
  color: #174ea6;
}

.refresh-button:active {
  box-shadow: 0 4px 4px 0 rgb(60 64 67 / 30%), 0 8px 12px 6px rgb(60 64 67 / 15%);
  outline: none;
}

.refresh-button:focus {
  outline: none;
  border: 2px solid #4285f4;
}

.refresh-button:not(:disabled) {
  box-shadow: rgba(60, 64, 67, .3) 0 1px 3px 0, rgba(60, 64, 67, .15) 0 4px 8px 3px;
}

.refresh-button:not(:disabled):hover {
  box-shadow: rgba(60, 64, 67, .3) 0 2px 3px 0, rgba(60, 64, 67, .15) 0 6px 10px 4px;
}

.refresh-button:not(:disabled):focus {
  box-shadow: rgba(60, 64, 67, .3) 0 1px 3px 0, rgba(60, 64, 67, .15) 0 4px 8px 3px;
}

.refresh-button:not(:disabled):active {
  box-shadow: rgba(60, 64, 67, .3) 0 4px 4px 0, rgba(60, 64, 67, .15) 0 8px 12px 6px;
}

.refresh-button:disabled {
  box-shadow: rgba(60, 64, 67, .3) 0 1px 3px 0, rgba(60, 64, 67, .15) 0 4px 8px 3px;
}
.sidebar.open li a .links_name{
  opacity: 1;
  pointer-events: auto;
}
.sidebar li a:hover .links_name,
.sidebar li a:hover i{
  transition: all 0.5s ease;
  color: #11101D;
}
.sidebar li i{
  height: 50px;
  line-height: 50px;
  font-size: 18px;
  border-radius: 12px;
}
.sidebar li.profile{
  position: fixed;
  height: 60px;
  width: 78px;
  left: 0;
  bottom: -8px;
  padding: 10px 14px;
  background: #1d1b31;
  transition: all 0.5s ease;
  overflow: hidden;
}
.sidebar.open li.profile{
  width: 250px;
}
.sidebar li .profile-details{
  display: flex;
  align-items: center;
  flex-wrap: nowrap;
}
.sidebar li img{
  height: 45px;
  width: 45px;
  object-fit: cover;
  border-radius: 6px;
  margin-right: 10px;
}
.sidebar li.profile .name,
.sidebar li.profile .job{
  font-size: 15px;
  font-weight: 400;
  color: #fff;
  white-space: nowrap;
}
.sidebar li.profile .job{
  font-size: 12px;
}
.sidebar .profile #log_out{
  position: absolute;
  top: 50%;
  right: 0;
  transform: translateY(-50%);
  background: #1d1b31;
  width: 100%;
  height: 60px;
  line-height: 60px;
  border-radius: 0px;
  transition: all 0.5s ease;
}
.sidebar.open .profile #log_out{
  width: 50px;
  background: none;
}
.home-section{
  position: relative;
  background: #E4E9F7;
  min-height: 100vh;
  top: 0;
  left: 78px;
  width: calc(100% - 78px);
  transition: all 0.5s ease;
  z-index: 2;
}
.sidebar.open ~ .home-section{
  left: 250px;
  width: calc(100% - 250px);
}
.home-section .text{
  display: inline-block;
  color: #11101d;
  font-size: 25px;
  font-weight: 500;
  margin: 18px
}
@media (max-width: 420px) {
  .sidebar li .tooltip{
    display: none;
  }
}
body{
  font:1.2em normal Arial,sans-serif;
  color:#34495E;
}

h1{
  text-align:center;
  text-transform:uppercase;
  letter-spacing:-2px;
  font-size:2.5em;
  margin:20px 0;
}
.card {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
  padding: 16px;
  position: relative;
  text-align: center;
  background: #E4E9F7;
  z-index: 2;
  background-repeat: no-repeat;
  background-position: 50% 50%;
  background-size: cover;
  width: 500px;
  height:500px;
}
.container{
  width:90%;
  margin:auto;
}

table{
  border-collapse:collapse;
  width:100%;
}

.blue{
  border:2px solid #1ABC9C;
}

.blue thead{
  background:#1ABC9C;
}

.purple{
  border:2px solid #9B59B6;
}

.purple thead{
  background:#9B59B6;
}

thead{
  color:white;
}

th,td{
  text-align:center;
  padding:5px 0;
}

tbody tr:nth-child(even){
  background:#ECF0F1;
}

tbody tr:hover{
background:#BDC3C7;
  color:#FFFFFF;
}

.fixed{
  top:0;
  position:fixed;
  width:auto;
  display:none;
  border:none;
}
.column {
  float: left;
  width: 50%;
  padding: 10px;
  height: 300px; /* Should be removed. Only for demonstration */
}

.scrollMore{
  margin-top:600px;
}

.up{
  cursor:pointer;
}
  </style>
  <body>
    <div class="sidebar">
      <div class="logo-details">
        <!-- <i class="bx bxl-c-plus-plus icon"></i> -->
        <div class="logo_name">SelfService Portal</div>
        <i class="bx bx-menu" id="btn"></i>
      </div>
      <ul class="nav-list">
        <!-- <li>
          <i class="bx bx-search"></i>
          <input type="text" placeholder="Search..." />
          <span class="tooltip">Search</span>
        </li> -->
        <li>
          <a href="servers.html">
            <!-- <i class="bx bx-grid-alt"></i> -->
            <span class="links_name">EC2 Servers List</span>
          </a>
          <span class="tooltip">EC2 Servers List</span>
        </li>
        <li>
          <a href="stopstart.html">
            <!-- <i class="bx bx-user"></i> -->
            <span class="links_name">Stop/Start Servers</span>
          </a>
          <span class="tooltip">Stop/Start Servers</span>
        </li>
        <li>
          <a href="#">
            <!-- <i class="bx bx-chat"></i> -->
            <span class="links_name">Backup Servers</span>
          </a>
          <span class="tooltip">Backup Servers</span>
        </li>
        <li>
            <a href="index.html">
              <!-- <i class="bx bx-user"></i> -->
              <span class="links_name">Home</span>
            </a>
            <span class="tooltip">Home</span>
          </li>
      </ul>
    </div>
    <section class="home-section">
      <!-- <div class="text">EC2 Servers</div> -->
      <div class="container-fluid p-1 bg-secondary text-white text-center">
        <h1>STOP START SERVERS</h1>
        <p>Provide the Account Number and Select the Region in which you need to stop the instance</p> 
      </div><br>
      
    <div class="column">
    <form id="awsForm">
        <label for="aws_account_number">AWS Account Number:</label>
        <input type="text" id="aws_account_number" name="aws_account_number" required><br><br>
        
        <label for="aws_region">Select Region:</label>
        <select id="aws_region" name="aws_region">
            <option value="us-east-1">US East (N. Virginia)</option>
            <option value="us-west-2">US West (Oregon)</option>
            <option value="ap-northeast-1">AP-NORTHEAST(Tokyo)</option>
            <option value="ap-southeast-1">AP-SOUTHEAST(Singapore)</option>
            <option value="eu-central-1">EU-CENTRAL(Frankfrut)</option>
            <option value="eu-west-1">EU West (Ireland)</option>
            <!-- Add more options for other AWS regions -->
        </select><br><br>
    </form>

    <div id="ec2Instances">
        <!-- EC2 instances table will be displayed here -->
    </div>

    <button class="refresh-button" onclick="refreshInstances()">Refresh Instances</button>

    <div id="loadingIndicator" class="loading-indicator">
        <div class="loading-text">Loading...</div>
        <div class="loading-bar">
            <div id="loadingProgress" class="loading-progress"></div>
        </div>
    </div>

    <div id="statusMessage" class="status-message"></div>

    <script>
        function showLoadingIndicator() {
            $('#loadingIndicator').css('display', 'block');
            $('#loadingProgress').css('width', '0').animate({ width: '100%' }, 2000); // Start progress animation
        }

        function hideLoadingIndicator() {
            $('#loadingIndicator').css('display', 'none');
            $('#loadingProgress').css('width', '0');
        }
        function showStatusMessage(message, type) {
            var statusMessage = $('#statusMessage');
            statusMessage.text(message).removeClass().addClass('status-message').addClass(type).fadeIn();

            // Hide message after 3 seconds
            setTimeout(function() {
                statusMessage.fadeOut();
            }, 3000);
        }

        function fetchEC2Instances() {
            showLoadingIndicator();
            var formData = $('#awsForm').serialize();

            $.ajax({
                type: 'POST',
                url: '/api/get_ec2_instances',
                data: formData,
                success: function(response) {
                    var instances = response.instances;
                    var html = '<h1>EC2 Instances</h1>';
                    html += '<table class="blue">';
                    html += '<thead>';
                    html += '<tr><th>Instance ID</th><th>Name</th><th>State</th><th>Status Check</th><th>Region</th><th>Actions</th></tr>';
                    html += '</thead>';
                    html += '<tbody>';
                    instances.forEach(function(instance) {
                        var stateClass = instance.State === 'Running' ? 'running' : '';
                        var statusClass = instance.StatusCheck !== 'Ok' ? 'status-not-ok' : '';
                        html += '<tr>';
                        html += '<td>' + instance.InstanceId + '</td>';
                        html += '<td>' + instance.Name + '</td>'; // Display instance name
                        html += '<td class="' + stateClass + '">' + instance.State + '</td>';
                        html += '<td class="' + statusClass + '">' + instance.StatusCheck + '</td>';
                        html += '<td>' + instance.Region + '</td>';
                        html += '<td><button onclick="stopInstance(\'' + instance.InstanceId + '\')">Stop</button> <button onclick="startInstance(\'' + instance.InstanceId + '\')">Start</button></td>';
                        html += '</tr>';
                    });
                    html += '</tbody>';
                    html += '</table>';
                    $('#ec2Instances').html(html);
                    hideLoadingIndicator();
                },
                error: function(xhr, status, error) {
                    console.error('Error fetching EC2 instances:', error);
                    $('#ec2Instances').html('<p>Error fetching EC2 instances. Please try again.</p>');
                    hideLoadingIndicator();
                }
            });
        }

        function refreshInstances() {
            fetchEC2Instances();
        }

        function stopInstance(instanceId) {
            var accountNumber = $('#aws_account_number').val();
            var region = $('#aws_region').val();

            $.ajax({
                type: 'POST',
                url: '/api/stop_ec2_instance',
                data: {
                    instance_id: instanceId,
                    account_number: accountNumber,
                    region: region
                },
                success: function(response) {
                    showStatusMessage('Instance ' + instanceId + ' is stopping.', 'success');
                    refreshInstances();
                },
                error: function(xhr, status, error) {
                    console.error('Error stopping EC2 instance:', error);
                    showStatusMessage('Error stopping instance: ' + error, 'error');
                }
            });
        }

        function startInstance(instanceId) {
            var accountNumber = $('#aws_account_number').val();
            var region = $('#aws_region').val();

            $.ajax({
                type: 'POST',
                url: '/api/start_ec2_instance',
                data: {
                    instance_id: instanceId,
                    account_number: accountNumber,
                    region: region
                },
                success: function(response) {
                    showStatusMessage('Instance ' + instanceId + ' is starting.', 'success');
                    refreshInstances();
                },
                error: function(xhr, status, error) {
                    console.error('Error starting EC2 instance:', error);
                    showStatusMessage('Error starting instance: ' + error, 'error');
                }
            });
        }

        $(document).ready(function() {
            // Automatically fetch EC2 instances on page load
            fetchEC2Instances();

            // Fetch EC2 instances on region change
            $('#aws_region').change(function() {
                showLoadingIndicator(); // Show loading indicator on region change
                setTimeout(fetchEC2Instances, 1500); // Simulate loading delay and fetch instances
            });
        });
    </script>
    <script>
      let sidebar = document.querySelector(".sidebar");
let closeBtn = document.querySelector("#btn");
let searchBtn = document.querySelector(".bx-search");

closeBtn.addEventListener("click", ()=>{
  sidebar.classList.toggle("open");
  menuBtnChange();//calling the function(optional)
});

searchBtn.addEventListener("click", ()=>{ // Sidebar open when you click on the search iocn
  sidebar.classList.toggle("open");
  menuBtnChange(); //calling the function(optional)
});

// following are the code to change sidebar button(optional)
function menuBtnChange() {
 if(sidebar.classList.contains("open")){
   closeBtn.classList.replace("bx-menu", "bx-menu-alt-right");//replacing the iocns class
 }else {
   closeBtn.classList.replace("bx-menu-alt-right","bx-menu");//replacing the iocns class
 }
}
    </script>
    </div>
    </section>

    <!-- <script src="script.js"></script> -->
  </body>
</html>